var e,t=(e=require("jszip"))&&"object"==typeof e&&"default"in e?e.default:e;class r extends File{}const n=window.JSZip||t;module.exports=e=>({addFilter:t})=>(t("FILTER_DROPPED_ITEMS",function(t){try{function o(e){return t.filter(e=>!e._relativePath).concat(e||[])}const i=()=>(e=>{const t=(e=>{const t=new Map;return e.filter(e=>e._relativePath).forEach(e=>{const[,r]=e._relativePath.split("/");t.has(r)||t.set(r,[]),t.get(r).push(e)}),t})(e),o=Array.from(t.keys()).map(function(e){try{const o=new n;return t.get(e).forEach(e=>{o.file(e._relativePath,e)}),t.delete(e),Promise.resolve(o.generateAsync({type:"blob"})).then(function(t){return new r([t],e+".zip")})}catch(e){return Promise.reject(e)}});return Promise.all(o)})(t);return Promise.resolve(e?o(e(i())):Promise.resolve(i()).then(o))}catch(e){return Promise.reject(e)}}),{options:{}});
//# sourceMappingURL=zipper.js.map
